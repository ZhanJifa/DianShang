
@{
    ViewBag.Title = "Index";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width" />
    <meta name="author-name" content="Mironcoder | Miron Mahmud" />
    <meta name="author-email" content="mironcoder@gmail.com" />
    <meta name="author-profile" content="https://themeforest.net/user/mironcoder" />
    <meta name="template-name" content="Vegana" />
    <meta name="template-created" content="09-November-2020" />
    <meta name="template-title" content="Vegana - vegan food eCommerce store html template" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="keywords" content="vegana, vegan, food, eCommerce, store, html, template, bootstrap, vegetarian, organic, vegetables, greengrocery, fruit, healthy, shop" />
    <title>登录注册</title>
    <link rel="icon" href="~/assets/images/logo/favicon.png" />
    <link rel="stylesheet" href="~/assets/source/css/vendor/flaticon.css" />
    <link rel="stylesheet" href="~/assets/source/css/vendor/fontawesome.css" />
    <link rel="stylesheet" href="~/assets/source/css/vendor/bootstrap.min.css" />
    <link rel="stylesheet" href="~/assets/source/css/custom/main.css" />
    <link rel="stylesheet" href="~/assets/source/css/custom/signin-up.css" />
</head>
<body>
    <section class="sign-part">
        <div class="sign-content">
            <div class="content-cover">
                <a href="#"><img src="~/assets/images/logo/01.png" alt="logo" /></a>
                <h1>由民哥团队开发的网上购物平台</h1>
            </div>
        </div>
        <div class="sign-form">

            <div class="sign-cate">
                <ul class="nav nav-tabs">
                    <li><a href="#signin" class="nav-link acti<strong></strong>ve" data-toggle="tab">登录</a></li>
                    <li><a href="#signup" class="nav-link" data-toggle="tab">注册</a></li>
                </ul>
            </div>
            <div class="tab-pane active" id="signin">
                <div class="sign-heading">
                    <h2>登录</h2>
                    <p>使用账号密码登录您帐户.</p>
                </div>
                <form class="form">
                    <label class="form-label"> <input type="text" id="txtLoginName" placeholder="请输入您的账号" />  </label>
                    <label class="form-label"> <input type="password" id="txtLoginPwd" placeholder="请输入您的密码" /> <button type="button"><i class="eye fas fa-eye"></i></button>  </label>
                    <label class="form-link">
                        @*<div class="custom-control custom-checkbox">

                        </div> <a href="#">忘记密码?</a>*@
                    </label>
                    <label class="form-btn"> <button type="submit" id="btnLogin" class="btn btn-outline">登录</button> </label>
                </form>
                <div class="form-bottom">
                    <p>没有账号？点击上面注册按钮立即注册</p>
                </div>
            </div>
            <div class="tab-pane" id="signup">
                <div class="sign-heading">
                    <h2>注册</h2>
                    <p>在这里注册你的账号</p>
                </div>

                <form class="form" id="formUser">
                    <label class="form-label"> <input type="text" id="truename" name="truename" placeholder="真实姓名" />  </label>
                    <label class="form-label"> <input type="text" id="name" name="name" placeholder="用户名" />  </label>
                    <label class="form-label"> <input type="password" id="password" name="password" placeholder="用户密码" /> <button type="button"><i class="eye fas fa-eye"></i></button>  </label>
                    <label class="form-label"> <input type="text" id="city" name="city" placeholder="用户所在城市" /> @*</button>*@  </label>
                    <label class="form-label"> <input type="text" id="cardno" name="cardno" placeholder="用户身份证编号" /> <button type="button"><i class="eye fas fa-eye"></i></button></label>
                    <label class="form-label"> <input type="text" id="address" name="address" placeholder="用户所在详细地址" />  </label>
                    <label class="form-label"> <input type="text" id="postcode" name="postcode" placeholder="用户所在地的邮政编码" /> <button type="button"><i class="eye fas fa-eye"></i></button>  </label>
                    <label class="form-label"> <input type="text" id="Email" name="Email" placeholder="用户电子邮箱" /> </label>
                    <label class="form-label"> <input type="text" id="tel" name="tel" placeholder="用户电话号码" /> </label>
                    <label class="form-label"> <input type="text" id="question" name="question" placeholder="注册提示问题" /> </label>
                    <label class="form-label"> <input type="text" id="answer" name="answer" placeholder="注册回答问题" />   </label>

                    @*<div class="form-link">

                    </div>*@
                    <div class="form-btn">
                        <input type="button" onclick="ZcUser()" class="btn btn-outline" value="注册"/>     
                    </div>
                </form>

            </div>
        </div>
    </section>
    <script src="~/assets/source/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="~/assets/source/js/vendor/popper.min.js"></script>
    <script src="~/assets/source/js/vendor/bootstrap.min.js"></script>
    <script src="~/assets/source/js/custom/main.js"></script>
    <script src="~/Content/js/changyong.js"></script>
</body>
</html>
<script>

    //登入
    $(function () {
        $("#btnLogin").click(function () {
            var tLoginName = $("#txtLoginName").val();
            var tLoginPwd = $("#txtLoginPwd").val();
            $.ajax({
                //type: 'post',
                url: '/Login/Login',
                data: { TLoginName: tLoginName, TLoginPwd: tLoginPwd},
                success: function (dataTX) {
                    var list = dataTX.split(':');
                    alert(list[1]);
                    if (list[0] == 'OK') {
                        location.href = '/User/Index/?LoginName=' + tLoginName;
                    }
                }
            })
        })
    })
    //注册
    function ZcUser() {
        
        var cardno = /^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|31)|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/;
        if (!cardno.test($("#cardno").val())) {
            alert("请输入正确的身份证号");
            return;
        }
        
        //真实姓名的验证
        var truename = $("#truename").val().trim();
        var aa = /^([\u4e00-\u9fa5]{1,20}|[a-zA-Z\.\s]{1,20})$/;
        if (!aa.test(truename)) {
            alert("真实姓名不能为符号和数字,名字不能为空");
            return;
        }
        var tel = $("#tel").val()
        var vv = /^((\(\d{2,3}\))|(\d{3}\-))?1[3,8,5]{1}\d{9}$/;//手机号码开头必须是1,而且必须要11位数
        if (!vv.test(tel)) {
            alert("手机号码开头必须是1,而且必须要11位数");
            return;
        }
        //邮箱的验证
        //^[A-Za-z0-9\u4e00-\u9fa5]+[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$
        var Email = $("#Email").val();
        var re = /^\w+([\.-]?\w+)*@@\w+([\.-]?\w+)*(\.\w{2,3})+$/
        if (!re.test(Email)) {
            alert("邮箱格式错误!");
        }
        //登入账号必须3个以上
        var name = $("#name").val();
        if (name.trim().length < 3) {
            alert("登入账号必须3个以上");
            return;
        }
        //登入密码必须3个以上
        var password = $("#password").val();
        if (password.trim().length < 3) {
            alert("登入密码必须3个以上");
            return;
        }
        //序列化表单
        var member = $("#formUser").serialize();
        $.ajax({
            url: '/Login/ZcLogin',
            data: member,
            success: function (data) {
                if (data > 0) {
                    alert("注册成功！");
                    location.href = location.href;
                } else {
                    alert("注册失败！");
                }
            }
        })
    }
</script>
